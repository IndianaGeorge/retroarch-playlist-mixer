(this["webpackJsonpretroarch-playlist-mixer"]=this["webpackJsonpretroarch-playlist-mixer"]||[]).push([[0],{18:function(e,t,a){e.exports=a(27)},2:function(e,t,a){e.exports={container:"Game_container__1FRtk",label:"Game_label__3Xfiz",path:"Game_path__3ACC7",crc32:"Game_crc32__26Bi1",dbName:"Game_dbName__slKDc",core:"Game_core__3hxuS",coreName:"Game_coreName__1Af_M",corePath:"Game_corePath__3Riq4"}},23:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),i=a(11),s=a.n(i),r=(a(23),a(6)),c=a(4),o=a.n(c),m=a(17),u=a(9),h=a(12),p=a(13),f=a(3),d={version:"1.2",default_core_path:"",default_core_name:"",label_display_mode:0,right_thumbnail_mode:0,left_thumbnail_mode:0,items:[]},_=function(){function e(){Object(h.a)(this,e),this.playlist=null,this.filteredItems=null,this.filename=null,this.nameIndex={},this.crcIndex={},this.pathIndex={},this.playlistEvents=new f.a,this.filteredItemsEvents=new f.a,this.filenameEvents=new f.a}return Object(p.a)(e,[{key:"getPlaylistEvents",value:function(){return this.playlistEvents}},{key:"getfilteredItemsEvents",value:function(){return this.filteredItemsEvents}},{key:"getFilenameEvents",value:function(){return this.filenameEvents}},{key:"getEmptyPlaylist",value:function(){return JSON.parse(JSON.stringify(d))}},{key:"index",value:function(){var e=this;this.playlist&&this.playlist.items&&(this.nameIndex={},this.crcIndex={},this.pathIndex={},this.playlist.items.forEach((function(t){e.nameIndex[t.label]=t,e.crcIndex[t.crc32]=t,e.pathIndex[t.path]=t})))}},{key:"filter",value:function(e,t){if(this.playlist&&this.playlist.items)switch(e){case"label":this.filteredItems=this.playlist.items.filter((function(e){return e.label.indexOf(t)>-1})),this.filteredItemsEvents.publish(Object(u.a)(this.filteredItems));break;case"crc32":this.filteredItems=this.playlist.items.filter((function(e){return e.crc32.indexOf(t)>-1})),this.filteredItemsEvents.publish(this.filteredItems);break;case"path":this.filteredItems=this.playlist.items.filter((function(e){return e.path.indexOf(t)>-1})),this.filteredItemsEvents.publish(this.filteredItems)}}},{key:"publish",value:function(){this.filenameEvents.publish(this.filename),this.playlistEvents.publish(this.playlist),this.filteredItemsEvents.publish(this.filteredItems)}},{key:"empty",value:function(){this.playlist=null,this.filteredItems=null,this.filename=null,this.publish()}},{key:"set",value:function(e,t){this.filename=t,this.playlist=JSON.parse(JSON.stringify(e)),this.filteredItems=Object(u.a)(this.playlist.items),this.publish()}},{key:"add",value:function(e){this.playlist=JSON.parse(JSON.stringify(this.playlist)),this.playlist.items.push(Object(m.a)({},e)),this.publish()}},{key:"delete",value:function(e){this.playlist=JSON.parse(JSON.stringify(this.playlist)),this.playlist.items.splice(e,1),this.publish()}}]),e}(),b=Object(l.createContext)(new _),v=Object(l.createContext)(new _),y=a(16),E=a(15),x=a.n(E),N=a(5),O=a.n(N),g=a(2),k=a.n(g),I=function(e){var t=e.path,a=e.label,l=e.core_path,i=e.core_name,s=e.crc32,r=e.db_name;return n.a.createElement("div",{className:k.a.container,onClick:e.onClick},n.a.createElement("div",{className:k.a.label},a),n.a.createElement("div",{className:k.a.path},t),n.a.createElement("div",{className:k.a.crc32},s),n.a.createElement("div",{className:k.a.dbName},r),n.a.createElement("div",{className:k.a.core},n.a.createElement("div",{className:k.a.coreName},"".concat(i,": ")),n.a.createElement("div",{className:k.a.corePath},l)))},P=function(e){var t=Object(l.useContext)(e.controller),a=Object(f.b)(null,t.getPlaylistEvents()),i=Object(r.a)(a,1)[0],s=Object(f.b)(null,t.getfilteredItemsEvents()),c=Object(r.a)(s,1)[0],o=Object(f.b)(null,t.getFilenameEvents()),m=Object(r.a)(o,1)[0],u=Object(l.useCallback)((function(e){if(e&&e.length>0){var a=e[0],l=new FileReader;l.onabort=function(){return console.log("file reading was aborted")},l.onerror=function(){return console.log("file reading has failed")},l.onload=function(){var e=l.result;t.set(JSON.parse(e),a.path)},l.readAsText(a)}}),[t]),h=Object(y.a)({onDrop:u}),p=h.getRootProps,d=h.getInputProps;return n.a.createElement("div",{className:"".concat(e.className?e.className+" ":"").concat(O.a.wrap)},n.a.createElement("div",{className:O.a.filename},m),n.a.createElement("div",{className:O.a.content},c?c.map((function(t,a){return n.a.createElement(I,{onClick:function(){return e.onGameClick(t,a)},key:a,path:t.path,label:t.label,core_path:t.core_path,core_name:t.core_name,crc32:t.crc32,db_name:t.db_names})})):n.a.createElement("div",Object.assign({},p(),{className:O.a.dropzone}),n.a.createElement("input",d()),n.a.createElement("div",{className:O.a.dropzoneTitle},"Drop playlist here!"))),n.a.createElement("div",{className:O.a.buttonPanel},n.a.createElement("button",{onClick:t.empty.bind(t)},"reset"),n.a.createElement("button",{onClick:function(){!function(e,t){var a=new Blob([e],{type:"text/plain;charset=utf-8"});x.a.saveAs(a,t)}(JSON.stringify(i),m)}},"export")))},j=function(){var e=Object(l.useContext)(b),t=Object(l.useContext)(v),a=Object(l.useState)(""),i=Object(r.a)(a,2),s=i[0],c=i[1];return n.a.createElement("div",{className:o.a.App},n.a.createElement("header",{className:o.a.header},n.a.createElement("h1",{className:o.a.title},"Retroarch playlist mixer")),n.a.createElement("div",{className:o.a.playlistPanel},n.a.createElement(P,{controller:b,onGameClick:function(e,a){t.add(e),t.filter("label",s)}}),n.a.createElement(P,{controller:v,onGameClick:function(e,a){t.delete(a),t.filter("label",s)}})),n.a.createElement("div",{className:o.a.textPanel},n.a.createElement("div",{className:o.a.filter},n.a.createElement("input",{onChange:function(a){c(a.target.value),e.filter("label",a.target.value),t.filter("label",a.target.value)},value:s,className:o.a.filterText}),n.a.createElement("button",{onClick:function(){c(""),e.filter("label",""),t.filter("label","")}},"clear")),n.a.createElement("textarea",{rows:"6",disabled:!0,value:"console"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},4:function(e,t,a){e.exports={title:"App_title__1Eui0",App:"App_App__3xJ5q",header:"App_header__1FxIt",playlistPanel:"App_playlistPanel__fAtzO",textPanel:"App_textPanel__1ksXY",filter:"App_filter__2rpJO",filterText:"App_filterText__rjA92"}},5:function(e,t,a){e.exports={wrap:"Playlist_wrap__25CD4",content:"Playlist_content__3q2tv",buttonPanel:"Playlist_buttonPanel__1XzPe",filename:"Playlist_filename__3TaF-",dropzone:"Playlist_dropzone__3jSaX",dropzoneTitle:"Playlist_dropzoneTitle__MvR8x"}}},[[18,1,2]]]);
//# sourceMappingURL=main.4f660561.chunk.js.map